---
title:  "인코딩과 디코딩"
categories:
  - Py4e
tags:
  - Chapter 12
  - HTTP
---

## ASCII


아스키 코드는 1byte(8 bit) 즉 8자리 2진법 수자로서 256가지 문자를 구별할 수 있다. 

```python
print(ord('H'))
# 72
print(ord('e'))
# 101
print(ord('\n'))
# 10
```
각각의 문자는 숫자에 mapping되는 형식이다. 

문제는 70년대 이후 문자의 양이 늘어나며 256자만으로는 전 세계의 여러 문자를 포함시킬 수 없다는 것. 그래서 나온 게 유니코드다.

## UNICODE

유니코드는 몇 십 억개의 문자를 나타낼 수 있는 글자당 4byte의 크기를 가지게 된다. 문제는 이렇게 할 경우 낭비되는 공간이 굉장히 많다는 것. 그래서 유니코드와 함께 유니코드를 *압축*하는 UTF-8, UTF-16, UTF-32 방식 등이 생겨나게 되었다. 

파이썬 2.x에서는 유니코드를 나타내고자 하면 문자열 앞에 u를 붙여야만 했지만. 3.x 부터는 기본적으로 문자열은 유니코드다. 

```python
# Python 2.7.10 
x = '이광춘'
print(type(x))
# <type 'str'>
x = u'이광춘'
print(type(x))
# <type 'unicode'> 유니코드가 특별한 것. 
```

```python
# Python 3.5.1
x = '이광춘'
print(type(x))
# <class 'str'>
x = u'이광춘'
print(type(x))
# <class 'str'> 동일하다. 
```

여기서 이 이야기가 왜 나오냐면 소켓을 통해 데이타를 주고받는 데이타 방식과 파이선 내부에서 쓰는 방식이 다르기 떄문이다. 

> 파이썬: 유니코드
> 인터넷: UTF-8(95% 이상)

이기 떄문에, 유니코드 <--> UTF-8간 데이타 타입을 바꾸는 것을 인코딩과 디코딩이라고 한다. 

> 유니코드 --> UTF :인코딩
> UTF --> 유니코드 :디코딩


앞전 예제에서 썼던 명령어를 살펴보면, 파이썬 내부에서 `cmd`에 저장한 string(유니코드)을 UTF로 인코딩했다. 

```python
import socket

mysock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
mysock.connect(('data.pr4e.org', 80))
cmd = 'GET http://data.pr4e.org/romeo.txt HTTP/1.0\n\n'.encode()
mysock.send(cmd)
```

그리고 나서 받아들인 데이타는 우리가 다시 읽을 수 있도록 UTF-->유니코드로 디코딩한 것. 

```python
while True:
    data = mysock.recv(512)
    if (len(data) < 1):
        break
    print(data.decode())
mysock.close()
```



